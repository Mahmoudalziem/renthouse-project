"use strict";$(document).ready(function(){require("../admin/adminlte.min"),require("../admin/jquery.overlayScrollbars.min.js"),CKEDITOR.replace("form_course_descri"),CKEDITOR.instances.form_course_descri.setData($("div.container_content").attr("data-descri")),require("@fancyapps/fancybox/dist/jquery.fancybox"),require("@fancyapps/fancybox/dist/jquery.fancybox.min.css"),$("a.video").fancybox({transitionIn:"elastic",transitionOut:"elastic",speedIn:600,speedOut:200,overlayShow:!0}),$(document).on("click","div.form_course_descri_content_head",function(){$("div.form_course_descri").toggleClass("active")});var r=[];$("button.import_images_button").on("click",function(){$(this).siblings("input").trigger("click")}),$('input[name="images[]"]').on("change",function(e){for(var a=0;a<r.length;a++)r.shift();n($('input[name="images[]"]')[0]),this.value=""});var n=function(o){for(var e=o.files.length,a=function(n){var e=o.files[n],a=new FileReader,t=e.name,i=Math.ceil(e.size/1024);a.onload=function(e){r.push([t,i,e.target.result]);var a='<div class="image_item">\n                            <div class="row">\n                                <div class="col-6">\n                                    <div class="image_info">\n                                        <span>'.concat(t,"</span>\n                                        <span>").concat(i,' KB</span>\n                                    </div>\n                                </div>\n                                \x3c!-------\x3e\n                                <div class="col-6">\n                                    <div class="image_info_progress d-flex">\n                                        <span>\n                                            <div class="progress">\n                                                <div class="progress-bar bg-primary" style="width: 0%" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>\n                                            </div>\n                                        </span>\n                                        <span class="delete_image" data-id="').concat(n,'">\n                                            <i class="fa fa-trash" data-id="').concat(n,'"></i>\n                                        </span>\n                                    </div>\n                                </div>\n                                \x3c!------\x3e\n                            </div>\n                        </div>');$("div.box_upload_content").append(a),$("html").niceScroll().resize()},a.readAsDataURL(e)},n=0;n<e;n++)a(n)};$(document).on("click","span.delete_image",function(a){a=a.target.attributes[1].value-1;var e=r.indexOf(r[a]);-1<e&&r.splice(e,1);var n=$(this).children("i");$.ajax({url:$(this).parents("div.box_upload_content").attr("data-action"),method:"POST",data:{id:$(this).attr("data-id")},beforeSend:function(){$(n).addClass("fa-spinner").removeClass("fa-trash")},success:function(e){"done"==e&&$('span.delete_image[data-id="'.concat(a+1,'"]')).parents(".image_item").remove()}})}),holder.ondragover=function(){return $(this).addClass("hover"),!1},holder.ondrop=function(e){e.preventDefault(),$(this).removeClass("hover"),n(e.dataTransfer)},$(document).on("click","div.modal-footer button:first",function(){var e=$('input[name="video"]').val();if(""!=$('input[name="video"]').val()){var a=e.match(/(?:youtu\.be\/|youtube\.com(?:\/embed\/|\/v\/|\/watch\?v=|\/user\/\S+|\/ytscreeningroom\?v=))([\w\-]{10,12})\b/)[1];$("div.branding_video_container a").attr("href","https://www.youtube.com/embed/".concat(a,"?autoplay=1")),$("div.video_modaling").modal("hide"),$('input[name="video"]').val("")}return!1}),$('form[name="form_house"]').on("submit",function(e){for(var a=CKEDITOR.instances.form_course_descri.getData(),n=$("div.branding_video_container a").attr("href"),t=new FormData(this),i=0;i<r.length;i++)t.append("images[]",r[i].join("**"));return t.append("descri",a),t.append("course_id",$(this).attr("data-id")),t.append("promo",n),""==a?$("div.validate_error").text("Description Required").removeClass("d-none"):0==$("div.box_upload_content").children().length?$("div.validate_error").text("Images Required").removeClass("d-none"):"#"==n?$("div.validate_error").text("Promo Required").removeClass("d-none"):(e.preventDefault(),$.ajax({url:$(this).attr("action"),method:"POST",data:t,processData:!1,cache:!1,contentType:!1,beforeSend:function(){$("div.progress-bar").css("width","100%").text("100%"),$($("div.course_push_button button span").eq(0)).removeClass("d-none"),$($("div.course_push_button button span").eq(1)).addClass("d-none")},success:function(e){"done"==e&&location.replace("".concat(window.location.protocol,"//").concat(window.location.hostname,"/admin"))}})),!1})});